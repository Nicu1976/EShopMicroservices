

Marten converteste modelul (Product) in tabel in baza de date, posibul sa nu se faca cu EF
45. Vertical Slice practic traverseaza toate layerele (UI, Application, Domain, Infrastructure)

PS C:\Users\georgepetru> docker ps
CONTAINER ID   IMAGE         COMMAND                  CREATED       STATUS       PORTS                    NAMES
f8b7865ae7e9   postgres:18   "docker-entrypoint.s…"   2 hours ago   Up 2 hours   0.0.0.0:5432->5432/tcp   catalogdb
PS C:\Users\georgepetru> docker exec -it f8b7865ae7e9 bash
root@f8b7865ae7e9:/# psql -U postgres
psql (18.1 (Debian 18.1-1.pgdg13+2))
Type "help" for help.

postgres=# \l

 Name    |  Owner   | Encoding | Locale Provider |  Collate   |   Ctype    | Locale | ICU Rules |   Access privileges 
-----------+----------+----------+-----------------+------------+------------+--------+-----------+-----------------------
 CatalogDb | postgres | UTF8     | libc            | en_US.utf8 | en_US.utf8 |        |           |
 postgres  | postgres | UTF8     | libc            | en_US.utf8 | en_US.utf8 |        |           |
 template0 | postgres | UTF8     | libc            | en_US.utf8 | en_US.utf8 |        |           | =c/postgres          +
           |          |          |                 |            |            |        |           | postgres=CTc/postgres
 template1 | postgres | UTF8     | libc            | en_US.utf8 | en_US.utf8 |        |           | =c/postgres          +
           |          |          |                 |            |            |        |           | postgres=CTc/postgres
(4 rows)

press q to exit

postgres-# \c CatalogDb
You are now connected to database "CatalogDb" as user "postgres".
CatalogDb-#

to see the tables

CatalogDb-# \d 
Did not find any relations.
CatalogDb-#

CatalogDb=# \d
 public | mt_doc_product | table | postgres

CatalogDb=# SELECT * FROM mt_doc_product;

docker-compose -f docker-compose.yml -f docker-compose.override.yml up -d
sau putem face docker-compose ca proiect primar si facem run, selectam in loc de htps docker-compose

In docker selectam distributedcache redis si ca sa intram in redis tastam redis-cli
in acest moment suntem in redis si putem vedea variabilele

KEYS * 
ne arata tate cheile din redis

Add-Migration InitialCreate trebuie sa fie inainte de a pune linia de cod in Program.cs //app.UseMigration();
daca nu este comentata nu va functiona

Update-Database

Daca vrem sa facem o noua migrare la fel Add-Migration InitialCreate trebuie sa facem Remove-Migration si apoi sa stergem tot ce se afla in debug folder 
apoi clean solution si build all

Deci este foarte corect ce scrie mai sus:
1. Daca avem migrare facuta o stergem cu Remove-Migration (cred ca ar fi bine sa o executam oricum)
2. Stergem tot ce se afla in debug si obj folder
3. Clean solution si rebuild solution
4. Create-Migration First-Migration
5. Update-Database
6. enable la app.UseMigration()


GetDiscount:
{
    "productName":".IPhone X"
}

CreateDiscount
{
    "coupon": {
        "productName": "New IPhone 15",
        "description": "Description of New IPhone 15",
        "amount": 200
    }
}

UpdateDiscount
{
    "coupon":
    {
        "id": 1,
        "productName": "New IPhone 15 updated",
        "description": "Description of New IPhone 15 updated",
        "amount": 250
    }
}




